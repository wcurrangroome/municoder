<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Interface to the municode.com API • municoder</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Interface to the municode.com API">
<meta name="description" content="Access and programmatically navigated ordinances and associated metadata relating to regulatory documents hosted on municode.com.">
<meta property="og:description" content="Access and programmatically navigated ordinances and associated metadata relating to regulatory documents hosted on municode.com.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">municoder</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="municoder">municoder<a class="anchor" aria-label="anchor" href="#municoder"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of municoder is to allow users to programmatically navigate the municode.com API, including all of the ordinances hosted therein.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of <code><a href="https://wcurrangroome.github.io/municoder/">library(municoder)</a></code> like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv/reference/install.html" class="external-link">install</a></span><span class="op">(</span><span class="st">"wcurrangroome/municoder"</span><span class="op">)</span></span></code></pre></div>
<p>Check the spatial coverage of municode.com-listed ordinances</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_states</span> <span class="op">=</span> <span class="fu">municoder</span><span class="fu">::</span><span class="fu"><a href="reference/get_states.html">get_states</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">all_clients</span> <span class="op">=</span> <span class="va">all_states</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">state_abbreviation</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/keep.html" class="external-link">discard</a></span><span class="op">(</span><span class="op">~</span> <span class="fu">str_detect</span><span class="op">(</span><span class="va">.x</span>, <span class="st">"Tribes"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co">## "Tribes" throws an error for some reason</span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_dfr</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="reference/get_clients_in_state.html">get_clients_in_state</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">states_sf</span> <span class="op">=</span> <span class="fu">tigris</span><span class="fu">::</span><span class="fu">states</span><span class="op">(</span>cb <span class="op">=</span> <span class="cn">TRUE</span>, progress_bar <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">GEOID</span> <span class="op">&lt;</span> <span class="fl">60</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">tigris</span><span class="fu">::</span><span class="fu">shift_geometry</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>    <span class="va">all_clients</span> <span class="op">%&gt;%</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">state_abbreviation</span><span class="op">)</span>,</span>
<span>    by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STUSPS"</span> <span class="op">=</span> <span class="st">"state_abbreviation"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Retrieving data for the year 2021</span></span>
<span></span>
<span><span class="va">states_sf</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">geom_sf</span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">geom_sf</span><span class="op">(</span>data <span class="op">=</span> <span class="va">states_sf</span> <span class="op">%&gt;%</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">n</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span>, fill <span class="op">=</span> <span class="st">"lightgrey"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">labs</span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"municode.com Has Coverage across All 51 States"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Number of entities listed on municode.com, by state"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Entities with ordinances on municode.com"</span> <span class="op">%&gt;%</span> <span class="fu">str_wrap</span><span class="op">(</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">scale_fill_continuous</span><span class="op">(</span>trans <span class="op">=</span> <span class="st">"reverse"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">urbnthemes</span><span class="fu">::</span><span class="fu">theme_urbn_map</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-map%20of%20municode%20coverage%20by%20state-1.png" width="100%"> Explore an ordinance’s table of contents (TOC):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## this gives us the client_id</span></span>
<span><span class="va">alexandria_client_id</span> <span class="op">=</span> <span class="va">all_clients</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">state_name</span> <span class="op">==</span> <span class="st">"Virginia"</span>, <span class="va">client_name</span> <span class="op">==</span> <span class="st">"Alexandria"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">client_id</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## this gives us `product_name`s and associated `product_id`s</span></span>
<span><span class="va">alexandria_zoning_product_id</span> <span class="op">=</span> <span class="fu">municoder</span><span class="fu">::</span><span class="fu"><a href="reference/get_client_content.html">get_client_content</a></span><span class="op">(</span><span class="va">alexandria_client_id</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">product_name</span> <span class="op">==</span> <span class="st">"Zoning"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">product_id</span><span class="op">)</span></span>
<span></span>
<span><span class="va">alexandria_zoning_job_id</span> <span class="op">=</span> <span class="fu">municoder</span><span class="fu">::</span><span class="fu"><a href="reference/get_jobs_latest.html">get_jobs_latest</a></span><span class="op">(</span>product_id <span class="op">=</span> <span class="va">alexandria_zoning_product_id</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## this gives us `id`s for each primary component of the zoning ordinance</span></span>
<span><span class="fu">municoder</span><span class="fu">::</span><span class="fu"><a href="reference/get_codes_toc.html">get_codes_toc</a></span><span class="op">(</span></span>
<span>  job_id <span class="op">=</span> <span class="va">alexandria_zoning_job_id</span>, </span>
<span>  product_id <span class="op">=</span> <span class="va">alexandria_zoning_product_id</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 17 × 7</span></span>
<span><span class="co">#&gt;    toc_id toc_heading id             heading     has_children parent_id children</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;          &lt;chr&gt;       &lt;lgl&gt;        &lt;chr&gt;     &lt;lgl&gt;   </span></span>
<span><span class="co">#&gt;  1 12429  Zoning      THZOORALVI     THE ZONING… FALSE        12429     NA      </span></span>
<span><span class="co">#&gt;  2 12429  Zoning      SUHITA         Supplement… FALSE        12429     NA      </span></span>
<span><span class="co">#&gt;  3 12429  Zoning      ARTIGERE       ARTICLE I.… TRUE         12429     NA      </span></span>
<span><span class="co">#&gt;  4 12429  Zoning      ARTIIDE        ARTICLE II… TRUE         12429     NA      </span></span>
<span><span class="co">#&gt;  5 12429  Zoning      ARTIIIREZORE   ARTICLE II… TRUE         12429     NA      </span></span>
<span><span class="co">#&gt;  6 12429  Zoning      ARTIVCOOFINZO  ARTICLE IV… TRUE         12429     NA      </span></span>
<span><span class="co">#&gt;  7 12429  Zoning      ARTVMIUSZO     ARTICLE V.… TRUE         12429     NA      </span></span>
<span><span class="co">#&gt;  8 12429  Zoning      ARTVISPOVZO    ARTICLE VI… TRUE         12429     NA      </span></span>
<span><span class="co">#&gt;  9 12429  Zoning      ARTVIISUZORE   ARTICLE VI… TRUE         12429     NA      </span></span>
<span><span class="co">#&gt; 10 12429  Zoning      ARTVIIIOREPALO ARTICLE VI… TRUE         12429     NA      </span></span>
<span><span class="co">#&gt; 11 12429  Zoning      ARTIXSI        ARTICLE IX… TRUE         12429     NA      </span></span>
<span><span class="co">#&gt; 12 12429  Zoning      ARTXHIDIBU     ARTICLE X.… TRUE         12429     NA      </span></span>
<span><span class="co">#&gt; 13 12429  Zoning      ARTXIDEAPPR    ARTICLE XI… TRUE         12429     NA      </span></span>
<span><span class="co">#&gt; 14 12429  Zoning      ARTXIINONO     ARTICLE XI… TRUE         12429     NA      </span></span>
<span><span class="co">#&gt; 15 12429  Zoning      ARTXIIIENMA    ARTICLE XI… TRUE         12429     NA      </span></span>
<span><span class="co">#&gt; 16 12429  Zoning      APXAZOMAAM     APPENDIX A… FALSE        12429     NA      </span></span>
<span><span class="co">#&gt; 17 12429  Zoning      TAAM           TABLE OF A… FALSE        12429     NA</span></span></code></pre></div>
<p>And finally pull out the text for individual sections of an ordinance.</p>
<p>We can see that the “Purpose” statements for each of Alexandria’s residential zones tell us quite a bit about the rationale for each zone. For example, we might notice that the RMF zone is the only zone with a “Purpose” statement that refers to housing affordability–raising the question why Alexandria’s other zones aren’t also designed to further housing affordability–and that is also the only zone with a “Purpose” that does not explicitly refer to a cap on unit density.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">municoder</span><span class="fu">::</span><span class="fu"><a href="reference/get_codes_content.html">get_codes_content</a></span><span class="op">(</span></span>
<span>    product_id <span class="op">=</span> <span class="va">alexandria_zoning_product_id</span>, </span>
<span>    node_id <span class="op">=</span> <span class="st">"ARTIIIREZORE"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_dfr</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="reference/get_codes_content.html">get_codes_content</a></span><span class="op">(</span>product_id <span class="op">=</span> <span class="va">alexandria_zoning_product_id</span>, node_id <span class="op">=</span> <span class="va">.x</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">content</span><span class="op">)</span>,</span>
<span>    <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">heading</span>, <span class="st">"Purpose"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">content</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] " The R-20 zone is established to provide and maintain land areas for low density residential neighborhoods of single-unit, two-unit, and multi-unit up to four units dwellings on 20,000 square foot lots. Nonresidential uses of a noncommercial nature which are related to, supportive of and customarily found in a residential neighborhood are also permitted. "                </span></span>
<span><span class="co">#&gt;  [2] " The R-12 zone is established to provide and maintain land areas for low density residential neighborhoods of single-unit, two-unit, and multi-unit up to four units dwellings on 12,000 square foot lots. Nonresidential uses of a noncommercial nature which are related to, supportive of and customarily found in a residential neighborhood are also permitted. "                </span></span>
<span><span class="co">#&gt;  [3] " The R-8 zone is established to provide and maintain land areas for low density residential neighborhoods of single-unit, two-unit, and multi-unit up to four units dwellings on 8,000 square foot lots. Nonresidential uses of a noncommercial nature which are related to, supportive of and customarily found in a residential neighborhood are also permitted. "                  </span></span>
<span><span class="co">#&gt;  [4] " The R-5 zone is established to provide and maintain land areas for low density residential neighborhoods of single-unit, two-unit, and multi-unit up to four units dwellings on 5,000 square foot lots. Nonresidential uses of a noncommercial nature which are related to, supportive of and customarily found in a residential neighborhood are also permitted. "                  </span></span>
<span><span class="co">#&gt;  [5] " The R-2-5 zone is established to provide and maintain land areas for low density residential neighborhoods of single-unit, two-unit, and multi-unit up to four units dwellings on 5,000 square foot lots. Nonresidential uses of a noncommercial nature which are related to, supportive of and customarily found in a residential neighborhood are also permitted. "                </span></span>
<span><span class="co">#&gt;  [6] " The RA zone is established to provide and maintain land areas for medium density residential neighborhoods in which apartments predominate and in which single-unit, two-unit and townhouse development is permitted. Nonresidential uses of a noncommercial nature which are related to, supportive of and customarily found in such residential neighborhoods are also permitted. "</span></span>
<span><span class="co">#&gt;  [7] " The RB zone is established to provide and maintain land areas for medium density residential neighborhoods in which single-unit, two-unit, and townhouse dwellings are permitted. Nonresidential uses of a noncommercial nature which are related to, supportive of and customarily found in such residential neighborhoods are also permitted. "                                    </span></span>
<span><span class="co">#&gt;  [8] " The RCX zone is established to provide and maintain land areas for medium density apartment buildings and to permit limited commercial uses in such structures. Nonresidential uses of a noncommercial nature which are related to, supportive of and customarily found in such residential neighborhoods are also permitted. "                                                      </span></span>
<span><span class="co">#&gt;  [9] " The RC zone is established to provide and maintain land areas for high density apartment buildings and to permit limited commercial uses in such structures. Nonresidential uses of a noncommercial nature which are related to, supportive of and customarily found in such residential neighborhoods are also permitted. "                                                         </span></span>
<span><span class="co">#&gt; [10] " The RM zone is established to provide and maintain land areas for medium density residential neighborhoods of single-unit, two-unit and townhouse dwellings. Nonresidential uses of a noncommercial nature which are related to, supportive of and customarily found in such residential neighborhoods are also permitted. "                                                         </span></span>
<span><span class="co">#&gt; [11] " The RS zone is established to provide land areas for low to medium density townhouse development of approximately 15 units per acre which may be appropriate for infill sites in proximity to neighborhoods of single-family detached homes. "                                                                                                                                       </span></span>
<span><span class="co">#&gt; [12] " The RT zone is established to provide land areas for low density residential townhouse development at approximately nine units per acre which may be appropriate for infill sites in proximity to neighborhoods of low density single-unit, two-unit, and multi-unit up to four units dwellings. "                                                                                   </span></span>
<span><span class="co">#&gt; [13] " The RMF zone is established to provide land areas for multi-unit residential development and to enhance or preserve long-term affordability of housing. The zone would also permit limited neighborhood-serving commercial uses. "</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing municoder</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Will Curran-Groome <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Will Curran-Groome.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
